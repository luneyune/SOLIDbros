## SOLIDbros

### Repository for HACKATON 2024

Contributors:
 - Ivan Kirspu - Captain
 - Andrew Shmakov
 - Osipov Egor
 - Kopylov Egor
 - Denis Zhereshtiev

# Инструкция по запуску телеграм-бота по управлению домофонами
Необходимые библиотеки (должны установиться автоматически):
- pyTelegramBotAPI
- Flask
- Requests
- py-bcrypt

Перед запуском бота требуется запустить uniq_key_generation.py, который сгенерирует ключ доступа к API endpoint для осуществления звонков. Рекомендуется записать этот ключ для дальнейшего использования.

В файле config.py в переменные BOT_TOKEN и DOM_API_TOKEN нужно занести электронный ключ бота (если его ещё нет) и API ключ сервиса домофонов соответственно.

Для эффективной работы приложения необходимо установить специальное ПО для автоматизации, развёртывания и управления приложениями - [Doker Desktop](https://www.docker.com/).

После установки докера, необходимо создать образ и контейнер, содержащий скопированные файлы приложения. Для создания образа на основе Dockerfile, прописать в консоль: 
```shell
docker build -t <название образа> 
```
Пример команды:
```shell
docker build -t image . (точка указывает на текущую директорию)
```
Для создания контейнера из образа можно использовать команду:
```shell
docker run -d -p <порт на хостовой машине>:<порт внутри контейнера> --name <название контейнера> <название уже созданного образа>.
```
Пример команды:
```shell
docker run -d -p 5000:5000 --name solid-container image
```

После запуска приложения API endpoint будет доступен по URL: htttp://127.0.0.1:5000/tgbot/call

Для использования API endpoint требуется осуществить GET-запрос с query-параметрами: 
 - domofon_id - id домофона
 - tenant_id - id жильца
 - apartment_number - номер квартиры жильца

после чего пользователю поступит сообщение о звонке в соответствующий домофон.